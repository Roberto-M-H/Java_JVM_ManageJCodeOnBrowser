document.write("<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\"><link rel=\"shortcut icon\" href=\"http://nudge4j.appspot.com/favicon.ico\"><style>a               {color:#428bca;text-decoration:none}\n\t\ta:hover,a:focus {color:#2a6496;text-decoration:underline}</style><title>n4j - console</title></head><body style=\"font-family:monospace\"><pre id=\"editor\" style=\"position:absolute;top:2%;left:1%;right:1%;bottom:50%;border:1px solid #888\">//\n// Write your code here.\n//\n//\njava.lang.Thread.activeCount();</pre><input id=\"btnEval\" type=\"button\" value=\"Execute on JVM\" style=\"position:absolute;font-family:monospace;left:1%; top:50%;margin-top:5px;height:26px;cursor:pointer\"><div id=\"divResponse\" style=\"position:absolute;top:50%;left:1%;right:1%;margin-top:40px\"><i style=\"opacity:0.5\">JVM output will be printed here</i></div><a href=\"https://lorenzoongithub.github.io/nudge4j/\" style=\"position:absolute;right:3%;top:1%;border:1px solid #888;border-radius:8px;padding:2px 4px;background-color:#f8f8f8;font-size:11px;z-index:999\">nudge4j</a><script id=\"$0x\">//\n// xhrSendSnippet: ajax function to post code for the JVM to execute. \n//\nvar xhrSendSnippet = (function() {\n\tvar xhrPost = function(url, postData, callback) {\n\t\tvar x = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\n\t\tx.onreadystatechange = function() {\n\t\t\tif (x.readyState != 4) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (x.status == 200) {\n\t\t\t\tcallback(null, x.responseText);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcallback('Failure on HTTP Post',null);\n\t\t};\n\t\t\n\t\ttry {\n\t\t\tx.open('POST', url, true);\n\t\t\tx.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t\t\tx.send(postData);\n\t\t} catch (e) {\n\t\t\tcallback('Failure on HTTP Post - '+e,null)\n\t\t}\n\t};\n\t\n\treturn function(snippet, callback) {\t\n\t\txhrPost('/runJS', snippet, function(err, content) {\n\t\t\tif (err != null) {\n\t\t\t\tcallback(err, null);\n\t\t\t\treturn;\n\t\t\t} \n\t\t\tif (content.substring(0,7) == '$error:') {\n\t\t\t\tcallback(content.substring(7),null); \n\t\t\t} else {\n\t\t\t\tcallback(null, content);\t\n\t\t\t}\n\t\t});\n\t}\n})();\n\n\n\nfunction loadAceEditorAndThen(callback) {\n    var script = document.createElement('script'); \n    script.type  = 'text/javascript';\n    script.async = true;\n    script.src   = 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js';\n    var entry = document.getElementById('$0x');\n    entry.parentNode.insertBefore(script, entry);\n    if (script.addEventListener) {\n        script.addEventListener('load', callback, false);\n    } else {\n        script.attachEvent('onreadystatechange', function() {\n            if (/complete|loaded/.test(script.readyState))\n                callback();\n        });\n    }\n}\n\nloadAceEditorAndThen(function() {\n\tvar editor = ace.edit(\"editor\");\n\teditor.setTheme(\"ace/theme/eclipse\");\n\teditor.getSession().setMode(\"ace/mode/javascript\");\n\t\n\tvar btnEval = document.getElementById('btnEval');\n\tvar divResponse = document.getElementById('divResponse'); \n\t\n\tbtnEval.onclick= function() {\n\t\tbtnEval.disabled = true; \n\t\tdivResponse.innerHTML = '<img src=\"http://i.imgur.com/C6y2Fmf.gif\"/>';\n\t\txhrSendSnippet(editor.getValue(), function(err,response) {\n\t\t\tbtnEval.disabled = false;\n\t\t\tif (err) {\n\t\t\t\tdivResponse.innerHTML = '<pre style=\"color:#A44\">'+err+'</pre>';\n\t\t\t\treturn;\n\t\t\t}\t\n\t\t\tif (response.substr(0,6)=='$html:') {\n\t\t\t\tdivResponse.innerHTML = response.substr(6);\n\t\t\t} else {\n\t\t\t\t// see:http://stackoverflow.com/questions/6234773/can-i-escape-html-special-chars-in-javascript\n\t\t\t\tdivResponse.innerHTML = response.replace(/&/g, \"&amp;\")\n\t\t\t\t\t\t\t\t\t\t         .replace(/</g, \"&lt;\")\n\t\t\t\t\t\t\t\t\t\t         .replace(/>/g, \"&gt;\")\n\t\t\t\t\t\t\t\t\t\t         .replace(/\"/g, \"&quot;\")\n\t\t\t\t\t\t\t\t\t\t         .replace(/'/g, \"&#039;\");\n\t\t\t} \n\t\t});\n\t}\n\t\n\tif (location.href == 'https://lorenzoongithub.github.io/nudge4j/iframe.html') {\n\t\tbtnEval.disabled = true; \n\t}\n\n\tif (location.search.substring(6) == '?code=') {\n\t   var code = encodeURIComponent(location.search.substring(6));\n\t   editor.setValue(code);\n\t}\n\t\n});</script></body></html>")